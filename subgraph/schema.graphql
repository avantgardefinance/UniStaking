# Events

interface Event {
  id: Bytes!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type BeneficiaryAltered implements Event @entity(immutable: true) {
  id: Bytes!
  depositId: BigInt! # uint256
  oldBeneficiary: Bytes! # address
  newBeneficiary: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DelegateeAltered implements Event @entity(immutable: true) {
  id: Bytes!
  depositId: BigInt! # uint256
  oldDelegatee: Bytes! # address
  newDelegatee: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type RewardClaimed implements Event @entity(immutable: true) {
  id: Bytes!
  beneficiary: Bytes! # address
  amount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type RewardNotified implements Event @entity(immutable: true) {
  id: Bytes!
  amount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type StakeDeposited implements Event @entity(immutable: true) {
  id: Bytes!
  depositId: BigInt! # uint256
  amount: BigInt! # uint256
  totalDeposited: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type StakeWithdrawn implements Event @entity(immutable: true) {
  id: Bytes!
  depositId: BigInt! # uint256
  amount: BigInt! # uint256
  remainingAmount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type SurrogateDeployed implements Event @entity(immutable: true) {
  id: Bytes!
  delegatee: Bytes! # address
  surrogate: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# Higher Level Entities

type Deposit @entity {
  id: String!
  createdAt: Int!
  updatedAt: Int!
  owner: Account!
  delegatee: Account!
  beneficiary: Account!
  amount: BigInt!
}

type Surrogate @entity {
  id: Bytes!
  createdAt: Int!
  delegatee: Account!
}

type Account @entity {
  id: Bytes!
  ownerships: [Deposit!]! @derivedFrom(field: "owner")
  delegateeships: [Deposit!]! @derivedFrom(field: "delegatee")
  beneficiaryships: [Deposit!]! @derivedFrom(field: "beneficiary")
  delegateeSurrogates: [Surrogate!]! @derivedFrom(field: "delegatee")
}
